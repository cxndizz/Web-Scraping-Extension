<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BrowserHarvest - เครื่องมือดึงข้อมูลเว็บอัตโนมัติ</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div class="logo">
        <i class="fas fa-spider"></i>
        <h1>BrowserHarvest</h1>
      </div>
      <div class="tagline">เครื่องมือดึงข้อมูลเว็บอัตโนมัติ</div>
    </header>

    <main class="app-main">
      <section class="url-input-section">
        <div class="card">
          <h2><i class="fas fa-globe"></i> URL เป้าหมาย</h2>
          <div class="form-group">
            <input type="url" id="target-url" placeholder="https://example.com/" class="form-control">
            <button id="open-url-btn" class="btn btn-primary">
              <i class="fas fa-external-link-alt"></i> เปิดเว็บไซต์
            </button>
          </div>
          
          <div id="browser-preview" class="browser-preview" style="display: none;">
            <div class="preview-header">
              <div class="preview-url"></div>
              <div class="preview-actions">
                <button id="refresh-page-btn" class="btn btn-sm" title="รีเฟรชหน้า">
                  <i class="fas fa-sync-alt"></i>
                </button>
                <button id="close-browser-btn" class="btn btn-sm" title="ปิด Browser">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
            <div class="preview-image">
              <img id="page-screenshot" src="" alt="Page Preview">
            </div>
          </div>
        </div>
      </section>

      <section class="selector-section">
        <div class="card">
          <h2><i class="fas fa-mouse-pointer"></i> เลือกองค์ประกอบ</h2>
          <div class="form-group">
            <button id="select-item-btn" class="btn btn-selector" disabled>
              <i class="fas fa-mouse-pointer"></i> เลือกองค์ประกอบสินค้า
            </button>
            <button id="select-pagination-btn" class="btn btn-selector" disabled>
              <i class="fas fa-chevron-right"></i> เลือกปุ่มหน้าถัดไป
            </button>
          </div>
          
          <div id="selectors-container" class="selectors-container" style="display: none;">
            <div class="selector-list">
              <h3>ฟิลด์ข้อมูล</h3>
              
              <div class="selector-list-header">
                <div class="field-name">ชื่อฟิลด์</div>
                <div class="field-selector">Selector</div>
                <div class="field-attribute">คุณสมบัติ</div>
                <div class="field-actions">จัดการ</div>
              </div>
              
              <div id="field-items" class="field-items">
                <!-- Field items will be added dynamically -->
              </div>
              
              <button id="add-field-btn" class="btn btn-sm btn-outline">
                <i class="fas fa-plus"></i> เพิ่มฟิลด์
              </button>
              
              <div class="pagination-config" id="pagination-config" style="display: none;">
                <h3>ตั้งค่าเลื่อนหน้า</h3>
                <div class="form-group">
                  <label for="pagination-selector">Selector ปุ่มเลื่อนหน้า:</label>
                  <input type="text" id="pagination-selector" class="form-control" readonly>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="max-pages">จำนวนหน้าสูงสุด:</label>
                    <input type="number" id="max-pages" class="form-control" value="1" min="1">
                  </div>
                  <div class="form-group">
                    <label for="record-limit">จำนวน Records สูงสุด:</label>
                    <input type="number" id="record-limit" class="form-control" value="100" min="1">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="harvest-section">
        <div class="card">
          <h2><i class="fas fa-play"></i> เก็บข้อมูล</h2>
          <div class="form-group">
            <button id="start-harvest-btn" class="btn btn-success" disabled>
              <i class="fas fa-play"></i> เริ่มเก็บข้อมูล
            </button>
            <button id="clear-data-btn" class="btn btn-danger" disabled>
              <i class="fas fa-trash"></i> ล้างข้อมูล
            </button>
          </div>
          
          <div id="harvest-status" class="harvest-status" style="display: none;">
            <div class="status-info">
              <div class="status-item">
                <span class="status-label">สถานะ:</span>
                <span id="harvest-state" class="status-value">พร้อม</span>
              </div>
              <div class="status-item">
                <span class="status-label">หน้าปัจจุบัน:</span>
                <span id="current-page" class="status-value">0</span>
              </div>
              <div class="status-item">
                <span class="status-label">จำนวนข้อมูลทั้งหมด:</span>
                <span id="total-records" class="status-value">0</span>
              </div>
            </div>
            
            <div class="progress-bar">
              <div id="harvest-progress" class="progress-fill"></div>
            </div>
          </div>
        </div>
      </section>

      <section class="results-section">
        <div class="card">
          <h2><i class="fas fa-table"></i> ผลลัพธ์</h2>
          
          <div id="results-container" class="results-container">
            <div class="table-container">
              <table id="results-table">
                <thead>
                  <tr>
                    <th>ลำดับ</th>
                    <!-- Headers will be added dynamically -->
                  </tr>
                </thead>
                <tbody>
                  <!-- Data rows will be added dynamically -->
                </tbody>
              </table>
            </div>
            
            <div class="export-actions">
              <button id="export-csv-btn" class="btn btn-outline" disabled>
                <i class="fas fa-file-csv"></i> ส่งออก CSV
              </button>
              <button id="export-json-btn" class="btn btn-outline" disabled>
                <i class="fas fa-file-code"></i> ส่งออก JSON
              </button>
              <button id="export-sql-btn" class="btn btn-outline" disabled>
                <i class="fas fa-database"></i> ส่งออก SQL
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <div class="footer-content">
        <p>BrowserHarvest &copy; 2025</p>
        <div class="footer-links">
          <a href="#" id="about-link">เกี่ยวกับโปรแกรม</a>
          <a href="#" id="help-link">วิธีใช้งาน</a>
        </div>
      </div>
    </footer>

    <!-- Modal for Add/Edit Field -->
    <div id="field-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-title">เพิ่มฟิลด์</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="field-name">ชื่อฟิลด์:</label>
            <input type="text" id="field-name" class="form-control" placeholder="เช่น title, price, image">
          </div>
          <div class="form-group">
            <label for="field-selector">Selector:</label>
            <div class="selector-input">
              <input type="text" id="field-selector" class="form-control" readonly>
              <button id="pick-selector-btn" class="btn btn-sm">
                <i class="fas fa-mouse-pointer"></i> เลือก
              </button>
            </div>
          </div>
          <div class="form-group">
            <label for="field-attribute">คุณสมบัติ:</label>
            <select id="field-attribute" class="form-control">
              <option value="text">ข้อความ (text)</option>
              <option value="html">HTML</option>
              <option value="href">ลิงก์ (href)</option>
              <option value="src">รูปภาพ (src)</option>
              <option value="data-id">data-id</option>
              <option value="data-price">data-price</option>
              <option value="data-url">data-url</option>
              <option value="title">title</option>
              <option value="alt">alt</option>
              <option value="value">value</option>
              <option value="custom">อื่นๆ (ระบุเอง)</option>
            </select>
          </div>
          <div id="custom-attribute-group" class="form-group" style="display: none;">
            <label for="custom-attribute">ระบุชื่อคุณสมบัติ:</label>
            <input type="text" id="custom-attribute" class="form-control" placeholder="เช่น data-custom">
          </div>
          <div class="form-group preview-group">
            <label>ตัวอย่างข้อมูล:</label>
            <div id="field-preview" class="field-preview">
              <div class="preview-placeholder">คลิก "เลือก" เพื่อดูตัวอย่าง</div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="save-field-btn" class="btn btn-primary">บันทึก</button>
          <button id="cancel-field-btn" class="btn btn-outline">ยกเลิก</button>
        </div>
      </div>
    </div>

    <!-- Add this toast notification container -->
    <div id="toast-container" class="toast-container"></div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>